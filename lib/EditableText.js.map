{"version":3,"file":"EditableText.js","sources":["../src/ui/EditableText.js"],"sourcesContent":["import React, { Component } from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\n\nconst Modes = {\n  Display: 'display',\n  Edit: 'edit',\n};\n\nclass EditableText extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      mode: Modes.Display,\n      localText: null,\n    };\n  }\n\n  handleOnKeyDown = ({ key }) => {\n    if (this.isEnter(key)) {\n      this.setState({ mode: Modes.Display });\n      this.fireOnChange();\n    } else if (this.isEsc(key)) {\n      this.setState({ mode: Modes.Display });\n    }\n  };\n\n  handleOnChange = e => {\n    this.setState({ localText: e.target.value });\n  };\n\n  handleOnBlur = () => {\n    if (this.props.saveButtons) return;\n\n    this.setState({ mode: Modes.Display });\n\n    this.fireOnChange();\n  };\n\n  handleOnClick = e => {\n    const { isEditable, text } = this.props;\n\n    if (isEditable) {\n      this.setState({ mode: Modes.Edit, localText: text });\n\n      e.stopPropagation();\n    }\n  };\n\n  handleOnCancel = () => this.setState({ mode: Modes.Display });\n\n  handleOnSave = () => {\n    this.setState({ mode: Modes.Display });\n    this.fireOnChange();\n  }\n\n  render() {\n    const { placeholder } = this.props;\n\n    const isEditMode = this.isEditMode();\n\n    return (\n      <div>\n        {isEditMode\n          ? this.editableText(placeholder)\n          : this.displayText(placeholder)}\n      </div>\n    );\n  }\n\n  renderSaveButtons = () => {\n    const { saveButtons, cancelBtnClassName, saveBtnClassName } = this.props;\n\n    return saveButtons && (\n      <div className=\"right\">\n        <div\n          className={classNames('inline weight-400 pointer', cancelBtnClassName)}\n          onClick={this.handleOnCancel}\n        >\n          Cancel\n        </div>\n        <div\n          className={classNames('pl1 inline weight-700 pointer', saveBtnClassName)}\n          onClick={this.handleOnSave}\n        >\n          Save\n        </div>\n      </div>\n    );\n  }\n\n  editableText(placeholder) {\n    const { localText } = this.state;\n\n    return [\n      <input\n        style={{ width: '100%' }}\n        className=\"input\"\n        autoFocus\n        onKeyDown={this.handleOnKeyDown}\n        onChange={this.handleOnChange}\n        onBlur={this.handleOnBlur}\n        value={localText || ''}\n        placeholder={placeholder}\n        onClick={e => e.stopPropagation()}\n      />,\n      this.renderSaveButtons(),\n    ];\n  }\n\n  displayText(placeholder) {\n    const {\n      isEditable, text, displayClassName, icon, iconClassName,\n    } = this.props;\n\n    const textClassName = classNames({ 'opacity-60': !text });\n\n\n    return (\n      <div className={classNames('edit-text', displayClassName)} onClick={this.handleOnClick}>\n        <span className={textClassName}>{text || placeholder}</span>\n\n        {isEditable && (\n          <i className={classNames(`fa fa-${icon} pointer`, iconClassName)} />\n        )}\n      </div>\n    );\n  }\n\n  fireOnChange() {\n    const { text, onChange } = this.props;\n\n    const localText = (this.state.localText || '').trim();\n\n    if (localText !== text) {\n      onChange(localText);\n    }\n  }\n\n  isEditMode() {\n    const { mode } = this.state;\n\n    return mode === Modes.Edit;\n  }\n\n  isEnter(key) {\n    return key === 'Enter';\n  }\n\n  isEsc(key) {\n    return key === 'Escape';\n  }\n}\n\nEditableText.displayName = 'EditableText';\n\nEditableText.defaultProps = {\n  text: '',\n  placeholder: '',\n  isEditable: false,\n  onChange: () => { },\n  saveButtons: false,\n  displayClassName: '',\n  icon: 'pencil',\n  iconClassName: 'pl1',\n  cancelBtnClassName: '',\n  saveBtnClassName: '',\n};\n\nEditableText.propTypes = {\n  /** Text value */\n  text: PropTypes.string,\n  /** Placeholder text */\n  placeholder: PropTypes.string,\n  /** Specifies wether is editable or not */\n  isEditable: PropTypes.bool,\n  /** onChange event handler */\n  onChange: PropTypes.func,\n  /** CSS class for display mode */\n  displayClassName: PropTypes.string,\n  /** CSS class for the icon */\n  iconClassName: PropTypes.string,\n  /** CSS class for cancel button */\n  cancelBtnClassName: PropTypes.string,\n  /** CSS class for save button */\n  saveBtnClassName: PropTypes.string,\n  /** Icon to be shown */\n  icon: PropTypes.string,\n  /** Show save/cancel links below the field */\n  saveButtons: PropTypes.bool,\n};\n\nexport default EditableText;\n"],"names":["Modes","EditableText","props","handleOnKeyDown","key","_this","isEnter","setState","mode","Display","fireOnChange","isEsc","handleOnChange","localText","e","target","value","handleOnBlur","saveButtons","handleOnClick","isEditable","text","Edit","stopPropagation","handleOnCancel","handleOnSave","renderSaveButtons","cancelBtnClassName","saveBtnClassName","React","className","classNames","state","Component","placeholder","this","isEditMode","editableText","displayText","width","displayClassName","icon","iconClassName","textClassName","opacity-60","onClick","onChange","trim","displayName","defaultProps","propTypes","PropTypes","string","bool","func"],"mappings":"u9BAIMA,eACK,eACH,QAGFC,oCACQC,iHACJA,aAORC,gBAAkB,gBAAGC,IAAAA,IACfC,EAAKC,QAAQF,MACVG,UAAWC,KAAMR,MAAMS,YACvBC,gBACIL,EAAKM,MAAMP,MACfG,UAAWC,KAAMR,MAAMS,aAIhCG,eAAiB,cACVL,UAAWM,UAAWC,EAAEC,OAAOC,WAGtCC,aAAe,WACTZ,EAAKH,MAAMgB,gBAEVX,UAAWC,KAAMR,MAAMS,YAEvBC,mBAGPS,cAAgB,kBACed,EAAKH,MAA1BkB,IAAAA,WAAYC,IAAAA,KAEhBD,MACGb,UAAWC,KAAMR,MAAMsB,KAAMT,UAAWQ,MAE3CE,sBAINC,eAAiB,kBAAMnB,EAAKE,UAAWC,KAAMR,MAAMS,aAEnDgB,aAAe,aACRlB,UAAWC,KAAMR,MAAMS,YACvBC,kBAiBPgB,kBAAoB,iBAC4CrB,EAAKH,MAA3DgB,IAAAA,YAAaS,IAAAA,mBAAoBC,IAAAA,wBAElCV,GACLW,2BAAKC,UAAU,8CAEAC,WAAW,4BAA6BJ,WAC1CtB,EAAKmB,+DAKHO,WAAW,gCAAiCH,WAC9CvB,EAAKoB,0BAvEfO,YACGhC,MAAMS,kBACD,0BALUwB,6DAgDfC,EAAgBC,KAAKjC,MAArBgC,YAEFE,EAAaD,KAAKC,oBAGtBP,iCAEMM,KAAKE,aAAaH,GAClBC,KAAKG,YAAYJ,yCA0BdA,OACHrB,EAAcsB,KAAKH,MAAnBnB,iBAGNgB,oCACWU,MAAO,kBACN,+BAECJ,KAAKhC,yBACNgC,KAAKvB,sBACPuB,KAAKlB,mBACNJ,GAAa,eACPqB,UACJ,mBAAKpB,EAAES,qBAElBY,KAAKT,yDAIGQ,SAGNC,KAAKjC,MADPkB,IAAAA,WAAYC,IAAAA,KAAMmB,IAAAA,iBAAkBC,IAAAA,KAAMC,IAAAA,cAGtCC,EAAgBZ,YAAaa,cAAevB,WAIhDQ,2BAAKC,UAAWC,WAAW,YAAaS,GAAmBK,QAASV,KAAKhB,2CACjEW,UAAWa,MAAwBT,MAGvCL,yBAAGC,UAAWC,oBAAoBU,aAAgBC,mDAO7BP,KAAKjC,MAAxBmB,IAAAA,KAAMyB,IAAAA,SAERjC,GAAasB,KAAKH,MAAMnB,WAAa,IAAIkC,OAE3ClC,IAAcQ,KACPR,+CAKMsB,KAAKH,MAAdxB,OAEQR,MAAMsB,qCAGhBlB,SACS,UAARA,gCAGHA,SACW,WAARA,WAIXH,aAAa+C,YAAc,eAE3B/C,aAAagD,mBACL,eACO,eACD,WACF,0BACG,mBACK,QACZ,uBACS,yBACK,oBACF,IAGpBhD,aAAaiD,gBAELC,UAAUC,mBAEHD,UAAUC,kBAEXD,UAAUE,cAEZF,UAAUG,sBAEFH,UAAUC,qBAEbD,UAAUC,0BAELD,UAAUC,wBAEZD,UAAUC,YAEtBD,UAAUC,mBAEHD,UAAUE"}